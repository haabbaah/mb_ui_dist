(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6560fccc"],{"0ba6":function(e,t,i){"use strict";var s=i("9c52"),a=i.n(s);a.a},"9c52":function(e,t,i){},a306:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"imagesizes"},[i("div",{staticClass:"header"},[i("div",{staticClass:"change-sizes"},[i("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:e.width,expression:"width",modifiers:{number:!0,lazy:!0}}],staticClass:"change-sizes-input",attrs:{type:"text"},domProps:{value:e.width},on:{focus:function(t){e.onFocus="width"},change:function(t){e.width=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}}),i("div",{staticClass:"wrapper-ratio"},[i("q-btn-toggle",{staticClass:"change-sizes-ratio",attrs:{options:e.ratioOptions,clearable:"","toggle-color":"primary",disable:e.isDisableRatio},model:{value:e.isRatio,callback:function(t){e.isRatio=t},expression:"isRatio"}})],1),i("input",{directives:[{name:"model",rawName:"v-model.number.lazy",value:e.height,expression:"height",modifiers:{number:!0,lazy:!0}}],staticClass:"change-sizes-input",attrs:{type:"text"},domProps:{value:e.height},on:{focus:function(t){e.onFocus="height"},change:function(t){e.height=e._n(t.target.value)},blur:function(t){return e.$forceUpdate()}}})]),i("div",{staticClass:"main"},[i("q-btn",{staticClass:"main-btn",attrs:{title:"Обновить изображения",flat:"",round:"",color:"primary",icon:"refresh"},on:{click:e.getFiles}}),i("q-btn",{staticClass:"main-btn",attrs:{color:e.btnColorCreateImageSize,label:"Изменить размер","icon-right":e.btnIconCreateImageSize,loading:e.isCreateImageSize,disable:e.isCreateImageSize},on:{click:e.createImageSize},scopedSlots:e._u([{key:"loading",fn:function(){return[i("q-spinner-tail",{attrs:{size:"sm"}})]},proxy:!0}])})],1)]),i("div",{staticClass:"checked"},[i("q-checkbox",{model:{value:e.checkFiles,callback:function(t){e.checkFiles=t},expression:"checkFiles"}})],1),i("div",{staticClass:"images"},e._l(e.arrImages,(function(t){return i("q-card",{key:t.name,staticClass:"item"},[i("q-card-section",[i("div",{staticClass:"top"},[i("p",{staticClass:"name",attrs:{title:t.name}},[e._v(e._s(t.name))]),i("q-checkbox",{staticClass:"check-ready",model:{value:t.isReady,callback:function(i){e.$set(t,"isReady",i)},expression:"image.isReady"}})],1),i("div",{staticClass:"size width"},[i("p",{staticClass:"size-name"},[e._v("Ширина:")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.sizes.width,expression:"image.sizes.width",modifiers:{number:!0}}],staticClass:"edit edit-width",attrs:{type:"text"},domProps:{value:t.sizes.width},on:{input:function(i){i.target.composing||e.$set(t.sizes,"width",e._n(i.target.value))},blur:function(t){return e.$forceUpdate()}}})]),i("div",{staticClass:"size height"},[i("p",{staticClass:"size-name"},[e._v("Высота:")]),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.sizes.height,expression:"image.sizes.height",modifiers:{number:!0}}],staticClass:"edit edit-height",attrs:{type:"text"},domProps:{value:t.sizes.height},on:{input:function(i){i.target.composing||e.$set(t.sizes,"height",e._n(i.target.value))},blur:function(t){return e.$forceUpdate()}}})])])],1)})),1)])},a=[],n=(i("a623"),i("4de4"),i("4160"),i("d3b7"),i("159b"),i("96cf"),i("1da1")),r=i("5530"),o=i("2f62"),c=i("e6be"),l={name:"ImageSizes",mixins:[c["a"]],data:function(){return{isCreateImageSize:!1,btnColorCreateImageSize:"primary",btnIconCreateImageSize:"transform",arrImages:[],checkFiles:!0,width:0,height:0,onFocus:"",isDisableRatio:!1,isRatio:null,ratioOptions:[{label:"×",value:!0}]}},computed:Object(r["a"])({},Object(o["c"])({baseURL:function(e){return e.baseURL},globalOptions:function(e){return e.settings.options}})),watch:{width:function(e,t){if(this.isRatio&&"width"===this.onFocus){this.arrImages.forEach((function(t){return t.sizes.width=e}));var i=e*this.height/t;this.height=Math.floor(i)}else this.arrImages.forEach((function(t){return t.sizes.width=e}))},height:function(e,t){if(this.isRatio&&"height"===this.onFocus){this.arrImages.forEach((function(t){return t.sizes.height=e}));var i=e*this.width/t;this.width=Math.floor(i)}else this.arrImages.forEach((function(t){return t.sizes.height=e}))},checkFiles:function(e){this.arrImages.forEach((function(t){return t.isReady=e}))},isRatio:function(e){this.globalOptions.helpers.isRatio=e,this.setGlobalOptions()}},methods:Object(r["a"])(Object(r["a"])({},Object(o["b"])(["setGlobalOptions"])),{},{createImageSize:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isCreateImageSize=!0,i=e.arrImages.filter((function(e){return e.isReady})),t.prev=2,t.next=5,fetch(e.baseURL+"helpers_change_image_sizes",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({arrImages:i})});case 5:return s=t.sent,t.next=8,s.json();case 8:a=t.sent,a.error&&""!==a.error?(e.saveAction("btnIconCreateImageSize","btnColorCreateImageSize",!1),console.error(a.error)):e.saveAction("btnIconCreateImageSize","btnColorCreateImageSize"),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](2),e.saveAction("btnIconCreateImageSize","btnColorCreateImageSize",!1),console.error(t.t0);case 16:e.isCreateImageSize=!1;case 17:case"end":return t.stop()}}),t,null,[[2,12]])})))()},getFiles:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch(e.baseURL+"helpers_image_sizes");case 3:return i=t.sent,t.next=6,i.json();case 6:s=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.error("getFiles",t.t0);case 12:e.checkSameSazes(s),e.arrImages=s;case 14:case"end":return t.stop()}}),t,null,[[0,9]])})))()},checkSameSazes:function(e){var t=e[0].sizes.width,i=e[0].sizes.height,s=e.every((function(e){return e.sizes.width===t})),a=e.every((function(e){return e.sizes.height===i}));s&&a?(this.width=t,this.height=i,this.isDisableRatio=!1):this.isDisableRatio=!0},getGlobalOptions:function(){this.isRatio=this.globalOptions.helpers.isRatio}}),mounted:function(){},created:function(){this.getGlobalOptions(),this.getFiles()}},h=l,u=(i("0ba6"),i("2877")),m=Object(u["a"])(h,s,a,!1,null,"75e3c60d",null);t["default"]=m.exports},e6be:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var s={data:function(){return{}},methods:{saveAction:function(e,t){var i=this,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=this[e],n=this[t];s?(this[e]="done",this[t]="positive"):(this[e]="report_problem",this[t]="red"),setTimeout((function(){i[e]=a,i[t]=n}),2e3)}}}}}]);
//# sourceMappingURL=chunk-6560fccc.3449404d.js.map