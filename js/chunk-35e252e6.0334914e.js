(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35e252e6"],{"12b6":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"archive"},[e.folderName?r("div",[r("div",{staticClass:"header"},[r("q-btn",{staticClass:"head-btn",attrs:{color:e.btnColorCheckFiles,label:"Проверить файлы","icon-right":e.btnIconCheckFiles,loading:e.isCheckFiles,disable:e.isCheckFiles},on:{click:e.checkFiles},scopedSlots:e._u([{key:"loading",fn:function(){return[r("q-spinner-tail",{attrs:{size:"sm"}})]},proxy:!0}],null,!1,1364290725)}),r("q-btn",{staticClass:"head-btn",attrs:{color:e.btnColorCreateArchive,label:"Создать архив","icon-right":e.btnIconCreateArchive,loading:e.isCreateArchive,disable:e.isCreateArchive},on:{click:e.createArchive},scopedSlots:e._u([{key:"loading",fn:function(){return[r("q-spinner-tail",{attrs:{size:"sm"}})]},proxy:!0}],null,!1,1364290725)})],1),r("section",{staticClass:"wrapper"},[r("div",{staticClass:"item item-check"},[r("div",{staticClass:"false"},[r("h6",{staticClass:"title"},[e._v("Не прошли проверку")]),e._l(e.arrCheckFalse,(function(t,n){return r("div",{key:n,staticClass:"check-block"},[r("p",[r("q-icon",{attrs:{name:"close",color:"negative"}}),e._v(" "+e._s(t.name)+" "),t.warning?r("q-icon",{attrs:{name:"info",color:"info"}},[r("q-tooltip",[e._v(e._s(t.warning))])],1):e._e()],1)])}))],2),r("div",{staticClass:"true"},[r("h6",{staticClass:"title"},[e._v("Прошли проверку")]),e._l(e.arrCheckTrue,(function(t,n){return r("div",{key:n,staticClass:"check-block"},[r("p",[r("q-icon",{attrs:{name:"check",color:"positive"}}),e._v(" "+e._s(t)+" ")],1)])}))],2)]),r("div",{staticClass:"item"},e._l(e.arrArchiveCreated,(function(t,n){return r("div",{key:n,staticClass:"archive-block"},[r("p",[r("b",[e._v("Имя:")]),e._v(" "+e._s(t.name)+" ")]),r("p",[r("b",[e._v("Размер:")]),e._v(" "+e._s(t.size)+" ("+e._s(e._f("convertBytes")(t.size))+") "),r("q-btn",{attrs:{flat:"",round:"",color:"primary",icon:"content_copy",size:"xs"},on:{click:function(r){return e.copySize(t.size)}}})],1)])})),0)])]):r("div",[r("h6",{staticClass:"no-file"},[e._v("Файл не выбран")])])])},i=[],c=(r("b680"),r("d3b7"),r("96cf"),r("1da1")),a=r("5530"),s=r("2f62"),o=r("e6be");function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var r=1024,n=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],c=Math.floor(Math.log(e)/Math.log(r));return parseFloat((e/Math.pow(r,c)).toFixed(n))+" "+i[c]}var h={name:"Archive",mixins:[o["a"]],data:function(){return{autoCheck:!1,isCheckFiles:!1,btnColorCheckFiles:"primary",btnIconCheckFiles:"playlist_add_check",isCreateArchive:!1,btnColorCreateArchive:"primary",btnIconCreateArchive:"create",arrArchiveCreated:[],arrCheckTrue:[],arrCheckFalse:[]}},filters:{convertBytes:function(e,t){return l(e,t)}},computed:Object(a["a"])(Object(a["a"])({},Object(s["c"])({baseURL:function(e){return e.baseURL},folderName:function(e){return e.folderName},globalOptions:function(e){return e.settings.options}})),{},{redirectAfterFiles:{get:function(){return this.$store.state.redirectAfterFiles},set:function(e){this.$store.commit("setRedirectAfterFiles",e)}}}),watch:{},methods:{copySize:function(e){navigator.clipboard.writeText(l(e))},checkFiles:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isCheckFiles=!0,t.prev=1,t.next=4,fetch(e.baseURL+"check_files",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({folderName:e.folderName})});case 4:return r=t.sent,t.next=7,r.json();case 7:n=t.sent,n.error&&""!==n.error?(e.saveAction("btnIconCheckFiles","btnColorCheckFiles",!1),console.error(n.error)):e.saveAction("btnIconCheckFiles","btnColorCheckFiles"),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](1),e.saveAction("btnIconCheckFiles","btnColorCheckFiles",!1),console.error(t.t0);case 15:e.arrCheckTrue=n.arrCheckTrue,e.arrCheckFalse=n.arrCheckFalse,e.isCheckFiles=!1;case 18:case"end":return t.stop()}}),t,null,[[1,11]])})))()},createArchive:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.isCreateArchive=!0,e.arrArchiveCreated=[],!e.autoCheck){t.next=9;break}return t.next=5,e.checkFiles();case 5:if(0===e.arrCheckFalse.length){t.next=9;break}return e.saveAction("btnIconCreateArchive","btnColorCreateArchive",!1),e.isCreateArchive=!1,t.abrupt("return");case 9:return t.prev=9,t.next=12,fetch(e.baseURL+"create_archive",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify({folderName:e.folderName})});case 12:return r=t.sent,t.next=15,r.json();case 15:n=t.sent,n.error&&""!==n.error?(e.saveAction("btnIconCreateArchive","btnColorCreateArchive",!1),console.error(n.error)):e.saveAction("btnIconCreateArchive","btnColorCreateArchive"),t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](9),e.saveAction("btnIconCreateArchive","btnColorCreateArchive",!1),console.error(t.t0);case 23:e.arrArchiveCreated=n.data,e.isCreateArchive=!1;case 25:case"end":return t.stop()}}),t,null,[[9,19]])})))()},getGlobalOptions:function(){this.autoCheck=this.globalOptions.checkArchive.autoCheck}},mounted:function(){this.redirectAfterFiles="/archive"},created:function(){this.getGlobalOptions()}},u=h,v=(r("db08"),r("2877")),C=Object(v["a"])(u,n,i,!1,null,"4928ebbf",null);t["default"]=C.exports},db08:function(e,t,r){"use strict";var n=r("ef61"),i=r.n(n);i.a},e6be:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={data:function(){return{}},methods:{saveAction:function(e,t){var r=this,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this[e],c=this[t];n?(this[e]="done",this[t]="positive"):(this[e]="report_problem",this[t]="red"),setTimeout((function(){r[e]=i,r[t]=c}),2e3)}}}},ef61:function(e,t,r){}}]);
//# sourceMappingURL=chunk-35e252e6.0334914e.js.map